;==============================================================================
; fasm directives
;==============================================================================

use16
org 0x0

endl equ 0xa
include "src/inc/8086.inc"

;==============================================================================
; Executable header
;==============================================================================

db "ES"
dw start
times 20 db 0

;==============================================================================
; Constants and variables
;==============================================================================

msg:
	db "Bootloader's signature: "
msg_len = $-msg

;==============================================================================
; Main program
;==============================================================================

start:
	mov ax, cs
	mov ds, ax
	mov es, ax

main:
    mov ax, 0
    mov cl, 1
    mov dl, 0
    lea bx, [bootloader]
    int 0x22

    mov ah, 0x3
    mov bl, 0x7
	mov cx, msg_len
	lea si, [msg]
	int 0x21
	mov cx, 9
	lea si, [bootloader+2]
	int 0x21
    mov ah, 0x1
    mov al, 0xa
    int 0x21

	retf

bootloader: